webpackJsonp([16],{"SZM+":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("Xxa5"),i=s.n(n),a=s("Dd8w"),o=s.n(a),l=s("exGp"),c=s.n(l),r=s("lHA8"),d=s.n(r),_=s("bzuE").BASE_URL,h={data:function(){return{business_id:null,key:null,position_list:[],department_name:"",position_id:"",position:{name:"",jobtitle:"",levels:[],skills:[],amount:1,description:"",work_location:"",work_industry:"",work_environment:"",min_salary:0,max_salary:0,requirements:"",experience:0,questions:[],criteria:new Array,status:0},selected:[],school:[],schools:[],searchSchool:"",searchSkill:"",searchJobTitle:"",point:0,criteria:[],list_cv_recommend:[],list_cv_applied:[],list_cv:[],positions:[],jobtitles:[],environments:[],provinces:[],industries:[],majors:[]}},computed:{filteredSchool:function(){var t=this;return this.schools.filter(function(e){return-1!=e.name.toLowerCase().indexOf(t.searchSchool.toLowerCase())&&""!=t.searchSchool})},filteredSkill:function(){var t=this;return this.searchSkill=this.searchSkill.trim(),this.skills=new d.a([]),this.majors.forEach(function(e){t.position.levels.includes(e.level)&&""!=t.searchSkill&&e.skills.forEach(function(e){-1!=e.toLowerCase().indexOf(t.searchSkill.toLowerCase())&&t.skills.add(e)})}),this.skills},filteredJobTitle:function(){var t=this,e=new d.a;return this.position_list.forEach(function(s){s.department_name==t.department_name&&e.add(s.jobtitle)}),this.jobtitles.filter(function(s){if(-1!=s.name.toLowerCase().indexOf(t.searchJobTitle.toLowerCase())&&""!=t.searchJobTitle&&0==e.has(s.name))return!0}).map(function(t){return t.name})}},methods:{getCvApplied:function(t){this.position_id=t,this.list_cv=[],this.list_cv=this.list_cv_applied.filter(function(e){return e.position_id==t&&1==e.type})},getCvRecommend:function(t){var e=this;this.position_id=t._id,this.list_cv=[],this.$http.post(_+"/department/findcvforposition",{position:t}).then(function(s){e.list_cv=s.data.filter(function(t){return console.log(!e.list_cv_applied.find(function(e){return e.employee_id==t._id})),!e.list_cv_applied.find(function(e){return e.employee_id==t._id})}),1!=t.status&&Swal.fire({title:"Bạn có muốn đăng tuyển?",text:"Đăng tuyển giúp cho người tìm việc có thể thấy vị trí tuyển dụng!",icon:"warning",showCancelButton:!0,confirmButtonText:"Đăng tuyển!"}).then(function(s){s.isConfirmed&&e.publishRecruiting(t._id)})}).catch(function(t){console.log(t)})},filteredCV:function(t){var e=this;return t||(t=[]),t.filter(function(t){return!(e.point>t.point||!t.point)&&!(e.school.length>0&&!e.school.includes(t.school))})},publishRecruiting:function(t){var e=this;this.$http.post(_+"/department/position/publish",{position_id:t}).then(function(s){s.data&&e.position_list.forEach(function(s,n){s._id==t&&(e.position_list[n].status=1,e.getCvRecommend(s))})}).catch(function(t){console.log(t)})},stopRecruiting:function(t){var e=this;this.$http.post(_+"/department/position/stop",{position_id:t}).then(function(s){s.data&&e.position_list.forEach(function(s,n){s._id==t&&(e.position_list[n].status=0)})}).catch(function(t){console.log(t)})},onChange:function(t,e){if(1==t.target.checked){var s={employee_id:e._id,position_id:e.position_id,type:e.type&&0!=e.type?e.type:2,confirm:1==e.type?1:e.confirm};this.$http.post(_+"/job/create",{job:s}).then(function(t){console.log(t.data),alert("CV đã được chuyển sang phòng nhân sự")}).catch(function(t){console.log(t)})}if(0==t.target.checked){s={employee_id:e._id,position_id:e.position_id,type:2==e.type?0:e.type,confirm:1==e.type?0:e.confirm};this.$http.post(_+"/job/create",{job:s}).then(function(t){console.log(t.data)}).catch(function(t){console.log(t)})}},getExperience:function(t){var e=0;return t&&t.length>0&&t.filter(function(t){e+=new Date(t.to).getTime()-new Date(t.from).getTime()}),Math.round(e/15768e6)/2}},created:function(){var t=this;return c()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.key=localStorage.getItem("key"),!t.key){e.next=4;break}return e.next=4,t.$http.post(_+"/department/list/get-by-key",{key:t.key}).then(function(e){e.data&&(t.business_id=e.data[0].id,t.position_list=[],e.data.forEach(function(e){t.department_name=e.name,e.position.forEach(function(s){s.department_name=e.name,t.position_list.push(s)})}))}).catch(function(t){console.error(t)});case 4:t.position_list.forEach(function(){var e=c()(i.a.mark(function e(s){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.post(_+"/job/getcvidforposition",{id:s._id}).then(function(e){e.data.job_list.map(function(t){return o()({},t,e.data.cv_list.find(function(e){return e._id==t.employee_id}))}).forEach(function(e){0!=e.type&&t.list_cv_applied.push(e)})}).catch(function(t){console.log(t)});case 2:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}()),t.$http.get(_+"/position/getall").then(function(e){t.positions=e.data}).catch(function(t){console.error(t)}),t.$http.get(_+"/province/list").then(function(e){t.provinces=new d.a(e.data.map(function(t){return t.province}))}).catch(function(t){console.error(t)}),t.$http.get(_+"/major/list").then(function(e){t.majors=e.data}).catch(function(t){console.error(t)}),t.$http.get(_+"/industry/getall").then(function(e){t.industries=e.data}).catch(function(t){console.error(t)}),t.$http.get(_+"/environment/getall").then(function(e){t.environments=e.data}).catch(function(t){console.error(t)}),t.$http.get(_+"/jobtitle/getall").then(function(e){t.jobtitles=e.data}).catch(function(t){console.error(t)}),t.$http.get(_+"/school/getall").then(function(e){t.schools=e.data}).catch(function(t){console.error(t)}),t.$http.get(_+"/criteria/getall").then(function(e){t.criteria=e.data}).catch(function(t){console.error(t)});case 13:case"end":return e.stop()}},e,t)}))()},watch:{}},u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"card mt-4"},[s("div",{staticClass:"card-header text-center h5 bg-info bg-gradient text-white mb-2"},[t._v("\n      Đăng tuyển\n    ")]),t._v(" "),s("div",{staticClass:"card-body"},t._l(t.position_list,function(e,n){return s("div",{key:n,staticClass:"row my-1"},[s("div",{staticClass:"col-md-7"},[s("div",{staticClass:"form-check form-switch my-1"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.status,expression:"position.status"}],staticClass:"form-check-input text-primary",attrs:{type:"checkbox","true-value":"1","false-value":"0",disabled:""},domProps:{checked:Array.isArray(e.status)?t._i(e.status,null)>-1:t._q(e.status,"1")},on:{change:function(s){var n=e.status,i=s.target,a=i.checked?"1":"0";if(Array.isArray(n)){var o=t._i(n,null);i.checked?o<0&&t.$set(e,"status",n.concat([null])):o>-1&&t.$set(e,"status",n.slice(0,o).concat(n.slice(o+1)))}else t.$set(e,"status",a)}}}),t._v(" "),s("label",{},[t._v(t._s(e.jobtitle)),s("i",{staticClass:"ms-2 fas fa-circle-exclamation",attrs:{"data-bs-toggle":"modal","data-bs-target":"#position"+n}})])]),t._v(" "),s("div",{staticClass:"modal fade",attrs:{id:"position"+n,"data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog modal-dialog-scrollable"},[s("div",{staticClass:"modal-content"},[t._m(0,!0),t._v(" "),s("div",{staticClass:"modal-body"},[s("label",{staticClass:"form-label"},[t._v("Phòng ban:")]),t._v(" "),s("span",[t._v(t._s(e.department_name))]),s("br"),t._v(" "),s("label",{staticClass:"form-label"},[t._v("Chức danh công việc: ")]),t._v(" "),s("span",[t._v(t._s(e.jobtitle))]),s("br"),t._v(" "),s("label",{staticClass:"form-label"},[t._v("Chức vụ: ")]),t._v(" "),s("span",[t._v(t._s(e.name))]),s("br"),t._v(" "),s("label",{staticClass:"form-label"},[t._v("Cấp bậc: ")]),t._v(" "),s("span",[t._v(t._s(e.levels.toString().replaceAll(",",", ")))]),s("br"),t._v(" "),s("label",{staticClass:"form-label"},[t._v("Chuyên nghành: ")]),t._v(" "),s("span",[t._v(t._s(e.skills.toString().replaceAll(",",", ")))]),s("br"),t._v(" "),s("label",{staticClass:"form-label"},[t._v("Lĩnh vực kinh doanh: ")]),t._v(" "),s("span",[t._v(t._s(e.work_industry))]),s("br"),t._v(" "),s("label",{staticClass:"form-label"},[t._v("Nơi làm việc: ")]),t._v(" "),s("span",[t._v(t._s(e.work_location))]),s("br"),t._v(" "),s("label",{staticClass:"form-label"},[t._v("Môi trường làm việc: ")]),t._v(" "),s("span",[t._v(t._s(e.work_environment))]),s("br")]),t._v(" "),t._m(1,!0)])])])]),t._v(" "),s("div",{staticClass:"col-md-4"},[s("button",{staticClass:"btn btn-sm btn-primary position-relative",attrs:{type:"button"},on:{click:function(s){return t.getCvApplied(e._id)}}},[t._v("\n            CV ứng tuyển\n            "),s("span",{staticClass:"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"},[t._v("\n              "+t._s(t.list_cv_applied.filter(function(t){return 1==t.type&&t.position_id==e._id}).length)+"\n            ")])]),t._v(" "),s("button",{staticClass:"btn btn-sm btn-success",on:{click:function(s){return t.getCvRecommend(e)}}},[t._v("\n            Tìm CV\n          ")])])])}),0),t._v(" "),s("div",{staticClass:"card-footer bg-transparent"},[s("h5",{staticClass:"text-primary fw-bold text-center mb-4"},[t._v("Danh sách CV")]),t._v(" "),s("table",{staticClass:"table"},[t._m(2),t._v(" "),s("tbody",t._l(t.list_cv,function(e){return s("tr",{staticClass:"align-middle"},[s("th",{staticClass:"d-tale-cell",attrs:{scope:"row"}},[t._v("1")]),t._v(" "),s("td",{staticClass:"d-table-cell"},[t._v(t._s(e.name))]),t._v(" "),s("td",{staticClass:"d-none d-sm-table-cell"},[t._v("\n              "+t._s(e.birthdate.slice(0,4))+"\n            ")]),t._v(" "),s("td",{staticClass:"d-none d-md-table-cell"},[t._v(t._s(e.province))]),t._v(" "),s("td",{staticClass:"d-none d-xl-table-cell"},[t._v(t._s(e.job.jobtitle))]),t._v(" "),s("td",{staticClass:"d-none d-lg-table-cell"},[t._v("3 năm")]),t._v(" "),s("td",[t._v(t._s(e.point))]),t._v(" "),s("td",[s("a",{staticClass:"btn btn-sm btn-secondary",attrs:{href:"/business/cvid/"+e._id+"?position="+t.position_id,target:"_blank"}},[t._v("Xem CV")])])])}),0)])])]),t._v(" "),t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"staticBackdropLabel"}},[this._v("\n                    Thông tin vị trí tuyển dụng\n                  ")]),this._v(" "),e("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-bs-dismiss":"modal"}},[this._v("\n                    Thoát\n                  ")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",{},[s("th",{staticClass:"d-table-cell",attrs:{scope:"col"}},[t._v("#")]),t._v(" "),s("th",{staticClass:"d-table-cell",attrs:{scope:"col"}},[t._v("Họ và tên")]),t._v(" "),s("th",{staticClass:"d-none d-sm-table-cell",attrs:{scope:"col"}},[t._v("Năm sinh")]),t._v(" "),s("th",{staticClass:"d-none d-md-table-cell",attrs:{scope:"col"}},[t._v("Nơi ở")]),t._v(" "),s("th",{staticClass:"d-none d-xl-table-cell",attrs:{scope:"col"}},[t._v("\n              Chức danh công việc\n            ")]),t._v(" "),s("th",{staticClass:"d-none d-lg-table-cell",attrs:{scope:"col"}},[t._v("Kinh nghiệm")]),t._v(" "),s("th",{staticClass:"d-table-cell",attrs:{scope:"col"}},[t._v("Điểm CV")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Thao tác")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"form-label"},[this._v("Chức danh công việc "),e("span",{staticClass:"text-danger"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"form-label"},[this._v("Chức vụ "),e("span",{staticClass:"text-danger"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"form-label"},[this._v("Cấp bậc ứng viên "),e("span",{staticClass:"text-danger"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"form-label"},[this._v("Chuyên nghành ứng viên "),e("span",{staticClass:"text-danger"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"form-label"},[this._v("Nơi làm việc "),e("span",{staticClass:"text-danger"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"form-label"},[this._v("Số lượng "),e("span",{staticClass:"text-danger"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"form-label"},[this._v("Trường"),e("span",{staticClass:"text-danger"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"form-label"},[this._v("Điểm CV "),e("span",{staticClass:"text-danger"})])}]},v=s("VU/8")(h,u,!1,null,null,null);e.default=v.exports}});
//# sourceMappingURL=16.635c90969a689438c141.js.map